<?xml version="1.0" encoding="utf-8"?>
<qroot>
<question>
<Title>Installing rpy2 without admin privileges</Title>
<Body>&lt;p&gt;I am having trouble installing the Python package &lt;a href=&quot;http://rpy.sourceforge.net/rpy2.html&quot; rel=&quot;noreferrer&quot;&gt;rpy2&lt;/a&gt;. I have already compiled R as a shared library, but I do not have admin priviledges so I am trying to install rpy2 with:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;pip install -user rpy2&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;However, I am getting the following error:&lt;/p&gt;&lt;blockquote&gt;  &lt;p&gt;./rpy/rinterface/_rinterface.c:86:31: fatal error:  readline/readline.h: No such file or directory&lt;/p&gt;    &lt;p&gt;compilation terminated.&lt;/p&gt;    &lt;p&gt;error: command &#x27;gcc&#x27; failed with exit status 1&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;I have downloaded &lt;code&gt;readline&lt;/code&gt; to:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;/some/path/readline-6.2/&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;where I can see &lt;code&gt;readline.h&lt;/code&gt; (I have also compiled &lt;code&gt;readline&lt;/code&gt; just in case)&lt;/p&gt;&lt;h3&gt;My question:&lt;/h3&gt;&lt;p&gt;How can I make &lt;code&gt;rpy2&lt;/code&gt; (or pip) aware of this location with &lt;code&gt;readline.h&lt;/code&gt; to avoid the  header compilation error?&lt;/p&gt;</Body>
<Tags>python,r,gcc,rpy2</Tags>
</question>
<answer>
<Body>&lt;p&gt;Sometime in linux is needed an sudo apt-get upgrade, to get the news libraries, may work&lt;/p&gt;</Body>
</answer>
<answer>
<Body>&lt;p&gt;This is another option, but too you need root privilegies ...     sudo apt-get install libreadline-dev&lt;/p&gt;</Body>
</answer>
<answer>
<Body>&lt;p&gt;You&#x27;ll need to actually install readline, not just download it, and then point &lt;code&gt;rpy2&lt;/code&gt; to it with &lt;code&gt;CFLAGS&lt;/code&gt; and &lt;code&gt;LDFLAGS&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;Try this approach. It&#x27;s almost working for me - I have the same problem, except an additional wrinkle that rpy2 seems to be linking against the system R instead of my homedir install.&lt;/p&gt;&lt;p&gt;First, I downloaded readline to &lt;code&gt;~/src/readline-6.2&lt;/code&gt;, and installed it with &lt;code&gt;./configure --prefix=$HOME &amp;amp;&amp;amp; make &amp;amp;&amp;amp; make install&lt;/code&gt;. (You need to install it somewhere, not just download the source.)&lt;/p&gt;&lt;p&gt;Then I re-compiled R with&lt;/p&gt;&lt;pre&gt;&lt;code&gt;CPPFLAGS=&quot;-I/usr/local/include -I$HOME/include/&quot; \LDFLAGS=&quot;-L/usr/local/lib64 -L/usr/local/lib -L$HOME/lib64 -L$HOME/lib&quot; \./configure --prefix=$HOME --enable-BLAS-shlib --enable-R-shlibmakemake install&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;R is definitely now using that readline:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;$ ldd ~/lib64/R/lib/libR.so | grep readlinelibreadline.so.6 =&amp;gt; /home/dsutherl/lib/libreadline.so.6 (0x00007f8104207000)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The same for my in-home install of Python (3.2.3, since h5py doesn&#x27;t work with 3.3 yet):&lt;/p&gt;&lt;pre&gt;&lt;code&gt;CFLAGS=&quot;-I/usr/local/include -I$HOME/include/&quot; \LDFLAGS=&quot;-L/usr/local/lib64 -L/usr/local/lib -L$HOME/lib64 -L$HOME/lib&quot; \./configure --prefix=$HOMEmakemake install&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And again:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;$ ldd ~/lib/python3.2/lib-dynload/readline.cpython-32m.so | grep readlinelibreadline.so.6 =&amp;gt; /home/dsutherl/lib/libreadline.so.6 (0x00007fbfff5c2000)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Then I downloaded the rpy2 source and built that:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;CFLAGS=&quot;-I/usr/local/include -I$HOME/include/&quot; \LDFLAGS=&quot;-L/usr/local/lib64 -L/usr/local/lib -L$HOME/lib64 -L$HOME/lib&quot; \python3 setup.py build --r-home $HOME/lib64/R install&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This seemed successful, and &lt;code&gt;ldd&lt;/code&gt;ing the &lt;code&gt;.so&lt;/code&gt;s in &lt;code&gt;site-packages/rpy2&lt;/code&gt; links to the right &lt;code&gt;libreadline&lt;/code&gt;...but to the system &lt;code&gt;R&lt;/code&gt;, instead of mine, despite the explicit &lt;code&gt;--r-home&lt;/code&gt;.&lt;/p&gt;</Body>
</answer>
<answer>
<Body>&lt;p&gt;more simple :        &lt;/p&gt;&lt;pre&gt;&lt;code&gt;yum install readline-devel.x86_64&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;run for me on centos 7&lt;/p&gt;&lt;p&gt;for debian/ubuntu &lt;/p&gt;&lt;pre&gt;&lt;code&gt;apt-get install libreadline-dev&lt;/code&gt;&lt;/pre&gt;</Body>
</answer>
</qroot>
