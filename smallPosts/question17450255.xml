<?xml version="1.0" encoding="utf-8"?>
<qroot>
<question>
<Title>Sending 9000/s push notifications for iOS</Title>
<Body>&lt;p&gt;My system has about 10000 iOS users and i want to send them a push notification but without taking time as i may send another message after 5 minutes or less for the same user,I read this answer before which also founded in Apple Site:&lt;/p&gt;&lt;blockquote&gt;  &lt;p&gt;Push Notification Throughput and Error Checking&lt;/p&gt;    &lt;p&gt;There are no caps or batch size limits for using APNs. The iOS 6.1  press release stated that APNs has sent over 4 trillion push  notifications since it was established. It was announced at WWDC 2012  that APNs is sending 7 billion notifications daily.&lt;/p&gt;    &lt;p&gt;If you&#x27;re seeing throughput lower than 9,000 notifications per second,  your server might benefit from improved error handling logic.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;But a don&#x27;t know how to send 9000/s message while i&#x27;m sending the notification one by one.&lt;/p&gt;&lt;p&gt;I&#x27;m using Python (PyAPNs) and this is my code:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;from apns import APNs,Payloadresult = execute(&quot;SELECT token_hex FROM `Users`&quot;)for row in result:    token_hex = row[&#x27;token_hex&#x27;]    apns = APNs(use_sandbox=False, cert_file=&#x27;Cert.pem&#x27;, key_file=&#x27;CertKey.pem&#x27;)    payload = Payload(alert=&quot;Message&quot;,badge=1,sound=&#x27;default&#x27;)    apns.gateway_server.send_notification(token_hex, payload)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;I&#x27;m sending to 10000 users in more than 30 minutes...&lt;/p&gt;&lt;p&gt;So what is the problem in my code or what can i do to send the notification in less time...&lt;/p&gt;&lt;p&gt;Thanks in Advance,&lt;/p&gt;</Body>
<Tags>python,ios,push-notification,apple-push-notifications</Tags>
</question>
<answer>
<Body>&lt;p&gt;I don&#x27;t know python but looking at your code it looks like you are duplicating calls unnecessarily. You should use the same connection for sending all the notifications.&lt;/p&gt;&lt;p&gt;Perhaps you should try something like this :&lt;/p&gt;&lt;pre&gt;&lt;code&gt;from apns import APNs,Payloadresult = execute(&quot;SELECT token_hex FROM `Users`&quot;)apns = APNs(use_sandbox=False, cert_file=&#x27;Cert.pem&#x27;, key_file=&#x27;CertKey.pem&#x27;)payload = Payload(alert=&quot;Message&quot;,badge=1,sound=&#x27;default&#x27;)for row in result:    token_hex = row[&#x27;token_hex&#x27;]    apns.gateway_server.send_notification(token_hex, payload)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This is assuming you are sending the same notification payload to all your devices.&lt;/p&gt;</Body>
</answer>
</qroot>
