<?xml version="1.0" encoding="utf-8"?>
<qroot>
<question>
<Title>How to configure shared library search path after building GCC on my own?</Title>
<Body>&lt;p&gt;I just built GCC 5.1 on Ubuntu 14.04, which has gcc 4.8 as default. When I try to build things with it, I find that &lt;code&gt;ld&lt;/code&gt; will use the default libstdc++ instead of the newly build one.Here is the output:&lt;/p&gt;&lt;pre class=&quot;lang-none prettyprint-override&quot;&gt;&lt;code&gt;drizzlex@dx ~/test$ g++ hello.cpp drizzlex@dx ~/test$ ldd a.out     linux-vdso.so.1 =&amp;gt;  (0x00007ffde0d25000)    libstdc++.so.6 =&amp;gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6     (0x00007fa181ad2000)    libm.so.6 =&amp;gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007fa1817cc000)    libgcc_s.so.1 =&amp;gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fa1815b5000)    libc.so.6 =&amp;gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fa1811f0000)    /lib64/ld-linux-x86-64.so.2 (0x00007fa181dfd000)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And if I use &lt;code&gt;$ export LD_LIBRARY_PATH=/usr/local/lib64/&lt;/code&gt;, it will find the right one.&lt;/p&gt;&lt;pre class=&quot;lang-none prettyprint-override&quot;&gt;&lt;code&gt;drizzlex@dx ~/test$ ldd a.out     linux-vdso.so.1 =&amp;gt;  (0x00007fffeeaf5000)    libstdc++.so.6 =&amp;gt; /usr/local/lib64/libstdc++.so.6 (0x00007f4583d92000)    libm.so.6 =&amp;gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f4583a67000)    libgcc_s.so.1 =&amp;gt; /usr/local/lib64/libgcc_s.so.1 (0x00007f4583850000)        libc.so.6 =&amp;gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f458348b000)    /lib64/ld-linux-x86-64.so.2 (0x00007f458410e000)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;I would like to know what should I do to make it correct? Since I know set LD_LIBRARY_PATH is not the best choice.&lt;/p&gt;</Body>
<Tags>c++,c,gcc</Tags>
</question>
<answer>
<Body>&lt;p&gt;For building with g++ 5.1 use this:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;$ g++5.1 hello.cpp -Wl,-rpath,/usr/local/lib64&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And you will not need set LD_LIBRARY_PATH. &lt;/p&gt;&lt;p&gt;This is from &lt;a href=&quot;https://en.wikipedia.org/wiki/Rpath&quot; rel=&quot;nofollow&quot;&gt;https://en.wikipedia.org/wiki/Rpath&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;  &lt;p&gt;rpath is a term in programming which refers to a run-time search path  hard-coded in an executable file or library, used during dynamic  linking to find the libraries the executable or library requires.&lt;/p&gt;&lt;/blockquote&gt;</Body>
</answer>
</qroot>
