<?xml version="1.0" encoding="utf-8"?>
<qroot>
<question>
<Title>Git Submodules With Common Clone Directories</Title>
<Body>&lt;p&gt;I&#x27;m working on a project that uses &lt;a href=&quot;https://llvm.org&quot; rel=&quot;nofollow noreferrer&quot;&gt;LLVM&lt;/a&gt; and &lt;a href=&quot;https://lld.llvm.org&quot; rel=&quot;nofollow noreferrer&quot;&gt;LLD&lt;/a&gt;, which are stored in separate remote repositories (&lt;a href=&quot;https://git.llvm.org/git/llvm&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://git.llvm.org/git/llvm&lt;/a&gt;, &lt;a href=&quot;https://git.llvm.org/git/lld&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://git.llvm.org/git/lld&lt;/a&gt;). To build LLD, it must be cloned inside of LLVM, where the LLVM build system will detect its presence and generate build targets for it (&lt;a href=&quot;https://lld.llvm.org/getting_started.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;documentation&lt;/a&gt;). Precisely:&lt;/p&gt;&lt;p&gt;&lt;code&gt;LLD_CLONE_DIR = LLVM_CLONE_DIR/tools/lld&lt;/code&gt;&lt;/p&gt;&lt;p&gt;I would like to use git submodules, and invoke &lt;code&gt;git submodule update --init --recursive&lt;/code&gt; (during CMake configuration).&lt;/p&gt;&lt;p&gt;I&#x27;ve found that git doesn&#x27;t handle putting one submodule inside another submodule, for instance:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;[submodule &quot;contrib/llvm/tools/lld&quot;]    path = contrib/llvm/tools/lld    url = https://git.llvm.org/git/lld[submodule &quot;contrib/llvm&quot;]    path = contrib/llvm    url = https://git.llvm.org/git/llvm&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;I thought of making my build script construct a symlink, but it&#x27;s unreliable on some platforms (Windows). How can I structure the directories so that the LLVM build system will be happy, but I can use git submodules to clone both repositories?&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: I&#x27;ve succesfully used CMake&#x27;s file command to copy the lld sources to the correct location. I&#x27;m still interested in a better solution though.&lt;/p&gt;</Body>
<Tags>git,git-submodules,llvm-c++-api,lld</Tags>
</question>
</qroot>
