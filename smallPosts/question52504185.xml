<?xml version="1.0" encoding="utf-8"?>
<qroot>
<question>
<Title>Compare login info to csv data and grant access</Title>
<Body>&lt;p&gt;My program asks the user whether they have an account or not. If the user doesn&#x27;t have an account, then the program creates a new account for the user and stores their details in a csv file. This part works fine. But if the user runs the program again (after account creation) and tries to log in with the same details (username, password), it doesn&#x27;t work. How do I compare the login info to csv data and grant access?&lt;/p&gt;&lt;pre&gt;&lt;code&gt;##Two Subjects----&amp;gt; Computer Science and Historyimport csvdef main():    userAccount()def userAccount():    print(&#x27;-------------------------------&#x27;)    userAccount = input(&#x27;Do you already have an account: &#x27;)    if userAccount == &#x27;No&#x27; or userAccount== &#x27;N&#x27; or userAccount == &#x27;no&#x27; or userAccount == &#x27;n&#x27;:        userSName = input(&#x27;Name : &#x27;)        userSAge = input(&#x27;Age : &#x27;)        userSYgroup = input(&#x27;Year Group : &#x27;)        userGname = userSName[:3] + userSAge        print(&#x27;Your username is : &#x27;,userGname.lower())        userSword = input(&#x27;Password: &#x27;)        detail1 = [userSName,userSAge,userSYgroup,userGname,userSword]        with open(&#x27;userData.csv&#x27;,&#x27;w&#x27;,newline = &#x27;&#x27;) as csvfile:            w = csv.writer(csvfile,delimiter = &#x27;,&#x27;)            w.writerow(detail1)    elif userAccount == &#x27;Yes&#x27; or userAccount == &#x27;Y&#x27; or userAccount == &#x27;yes&#x27; or userAccount == &#x27;y&#x27;:        userLName = input(&#x27;Username: &#x27;)        passLWord = input(&#x27;Password: &#x27;)        f = open(&#x27;userData.csv&#x27;,&#x27;r&#x27;,newline = &#x27;&#x27;)        for i in f:            if userLName == f[0,3] and passLWord == f[0,4]:                print(&#x27;Log In Successfull&#x27;)            else:                print(&#x27;Incorrect Username or Password&#x27;)                main()      main()&lt;/code&gt;&lt;/pre&gt;</Body>
<Tags>python,python-3.x,csv</Tags>
</question>
<answer>
<Body>&lt;p&gt;Here&#x27;s a fully working version with slight changes. Add it to your original code. Though it might break your current code, because I changed a few variables name. Rename them accordingly.&lt;/p&gt;&lt;pre&gt;&lt;code&gt;##Two Subjects----&amp;gt; Computer Science and Historyimport csvdef main():    userAccount()    print(&quot;rest of the code&quot;)    input() # keep window opendef userAccount():    print(&#x27;-------------------------------&#x27;)    # group possible inputs; no need for individual checks    noAccount  = [&quot;no&quot;, &quot;NO&quot;, &quot;n&quot;, &quot;N&quot;]    yesAccount = [&quot;yes&quot;, &quot;YES&quot;, &quot;y&quot;, &quot;Y&quot;]    hasAccount = input(&#x27;Do you already have an account: &#x27;)    if hasAccount in noAccount:        userName   = input(&#x27;Name : &#x27;)        userAge    = input(&#x27;Age : &#x27;)        userYear   = input(&#x27;Year Group : &#x27;)        userLogin  = (userName[:3] + userAge).lower()        print(&#x27;Your username is : &#x27;, userLogin)        userPW     = input(&#x27;Password: &#x27;)        details    = [userName, userAge, userYear, userLogin, userPW]        # open file with &#x27;a&#x27; instead of &#x27;w&#x27; so multiple records can be added to csv        with open(&#x27;userData.csv&#x27;, &#x27;a&#x27;, newline=&#x27;&#x27;) as csvfile:            writer = csv.writer(csvfile, delimiter=&#x27;,&#x27;)            writer.writerow(details)        # once the account is created, return to beginning        main()    elif hasAccount in yesAccount:        userLogin = input(&#x27;Username: &#x27;)        userPW    = input(&#x27;Password: &#x27;)        granted   = None        with open(&#x27;userData.csv&#x27;, &#x27;r&#x27;, newline=&#x27;&#x27;) as csvfile:            reader = csv.reader(csvfile, delimiter=&#x27;,&#x27;)            # loop every row (record) in the csv file            for row in reader:                csvLogin = row[3]                csvPW    = row[4]                if userLogin == csvLogin and userPW == csvPW:                    granted = True                    print(&#x27;Log In Successfull&#x27;)                    # a user is matched; no need to check other records                    break        # if input doesn&#x27;t match any csv record, return to beginning        if granted is None:            print(&#x27;Incorrect Username or Password&#x27;)            main()    else:        # if user enters something other than yes/no, return to beginning        main()main()&lt;/code&gt;&lt;/pre&gt;</Body>
</answer>
</qroot>
