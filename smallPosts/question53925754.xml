<?xml version="1.0" encoding="utf-8"?>
<qroot>
<question>
<Title>KeyError reading a nested JSON with Pandas</Title>
<Body>&lt;p&gt;I&#x27;m triying to acces to the value os a nested property insside a JSON file. The file is:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;{ &quot;_id&quot; : { &quot;$oid&quot; : &quot;5b9058462f38434ab0d85cd3&quot; }, &quot;user_day_code&quot; : &quot;ead1db07fa526e19fe237115d5516fbdc5acb99057b885e8f662a147990b3c4b&quot;, &quot;idplug_base&quot; : 5, &quot;track&quot; : { &quot;type&quot; : &quot;FeatureCollection&quot;, &quot;features&quot; : [ { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.7073786, 40.4237274997222 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28015,ES,Madrid,Madrid,CALLE SAN BERNARDO 38,Madrid&quot;, &quot;speed&quot; : 1.75, &quot;secondsfromstart&quot; : 205 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.709896, 40.4191897997222 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28013,ES,Madrid,Madrid,CUSTA SANTO DOMINGO 6,Madrid&quot;, &quot;speed&quot; : 4.63, &quot;secondsfromstart&quot; : 85 } } ] }, &quot;user_type&quot; : 1, &quot;idunplug_base&quot; : 17, &quot;travel_time&quot; : 263, &quot;idunplug_station&quot; : 40, &quot;ageRange&quot; : 0, &quot;idplug_station&quot; : 16, &quot;unplug_hourTime&quot; : { &quot;$date&quot; : &quot;2018-09-01T01:00:00.000+0200&quot; }, &quot;zip_code&quot; : &quot;&quot; }{ &quot;_id&quot; : { &quot;$oid&quot; : &quot;5b9058462f38434ab0d85ce9&quot; }, &quot;user_day_code&quot; : &quot;420d9e220bd8816681162e15e9afcb1c69c5a756090728701083c5c0b23502f2&quot;, &quot;idplug_base&quot; : 12, &quot;track&quot; : { &quot;type&quot; : &quot;FeatureCollection&quot;, &quot;features&quot; : [ { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.7022001, 40.4052982997222 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28012,ES,Madrid,Madrid,GTA EMBAJADORES,Madrid&quot;, &quot;speed&quot; : 0.33, &quot;secondsfromstart&quot; : 351 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.698618, 40.4061700997222 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28012,ES,Madrid,Madrid,RONDA ATOCHA 30,Madrid&quot;, &quot;speed&quot; : 6.36, &quot;secondsfromstart&quot; : 291 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.6949231, 40.4072785997222 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28012,ES,Madrid,Madrid,RONDA ATOCHA,Madrid&quot;, &quot;speed&quot; : 4.77, &quot;secondsfromstart&quot; : 231 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.6920543, 40.4081501 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28012,ES,Madrid,Madrid,PLAZA EMPERADOR CARLOS V 1,Madrid&quot;, &quot;speed&quot; : 4.38, &quot;secondsfromstart&quot; : 170 } } ] }, &quot;user_type&quot; : 1, &quot;idunplug_base&quot; : 26, &quot;travel_time&quot; : 382, &quot;idunplug_station&quot; : 85, &quot;ageRange&quot; : 2, &quot;idplug_station&quot; : 52, &quot;unplug_hourTime&quot; : { &quot;$date&quot; : &quot;2018-09-01T01:00:00.000+0200&quot; }, &quot;zip_code&quot; : &quot;28009&quot; }{ &quot;_id&quot; : { &quot;$oid&quot; : &quot;5b9058462f38434ab0d85ced&quot; }, &quot;user_day_code&quot; : &quot;780f5c8157efe8e6dca44dbd689817d4b126364fca917f0e668bad9e7bf96939&quot;, &quot;idplug_base&quot; : 1, &quot;track&quot; : { &quot;type&quot; : &quot;FeatureCollection&quot;, &quot;features&quot; : [ { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.69610249972222, 40.427829 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28004,ES,Madrid,Madrid,PLAZA ALONSO MARTINEZ,Madrid&quot;, &quot;speed&quot; : 6.22, &quot;secondsfromstart&quot; : 200 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.69482799972222, 40.4282634997222 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28010,ES,Madrid,Madrid,CALLE FERNANDO EL SANTO 4,Madrid&quot;, &quot;speed&quot; : 0, &quot;secondsfromstart&quot; : 140 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.69164359972222, 40.4280088 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28010,ES,Madrid,Madrid,CALLE FERNANDO EL SANTO 20,Madrid&quot;, &quot;speed&quot; : 5.05, &quot;secondsfromstart&quot; : 80 } } ] }, &quot;user_type&quot; : 1, &quot;idunplug_base&quot; : 11, &quot;travel_time&quot; : 305, &quot;idunplug_station&quot; : 109, &quot;ageRange&quot; : 4, &quot;idplug_station&quot; : 58, &quot;unplug_hourTime&quot; : { &quot;$date&quot; : &quot;2018-09-01T01:00:00.000+0200&quot; }, &quot;zip_code&quot; : &quot;28004&quot; }{ &quot;_id&quot; : { &quot;$oid&quot; : &quot;5b9058462f38434ab0d85cee&quot; }, &quot;user_day_code&quot; : &quot;a225ab7b4b74954cd9fbe8cc2ec63390cd04e92cdd1a2fe1e58d42faea082b21&quot;, &quot;idplug_base&quot; : 1, &quot;track&quot; : { &quot;type&quot; : &quot;FeatureCollection&quot;, &quot;features&quot; : [ { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.72050759972222, 40.4277548 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28008,ES,Madrid,Madrid,PASEO PINTOR ROSALES 49P,Madrid&quot;, &quot;speed&quot; : 0.86, &quot;secondsfromstart&quot; : 258 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.717881, 40.4274713 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28008,ES,Madrid,Madrid,CALLE QUINTANA 17,Madrid&quot;, &quot;speed&quot; : 6.75, &quot;secondsfromstart&quot; : 199 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.7142441, 40.4297779997222 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28015,ES,Madrid,Madrid,CALLE SERRANO JOVER 4D,Madrid&quot;, &quot;speed&quot; : 7.08, &quot;secondsfromstart&quot; : 139 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.71240559972222, 40.4341422997222 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28015,ES,Madrid,Madrid,CALLE FERNANDO EL CATOLICO 47A,Madrid&quot;, &quot;speed&quot; : 5.25, &quot;secondsfromstart&quot; : 79 } }, { &quot;geometry&quot; : { &quot;type&quot; : &quot;Point&quot;, &quot;coordinates&quot; : [ -3.7089558, 40.4340593 ] }, &quot;type&quot; : &quot;Feature&quot;, &quot;properties&quot; : { &quot;var&quot; : &quot;28015,ES,Madrid,Madrid,CALLE FERNANDO EL CATOLICO 21,Madrid&quot;, &quot;speed&quot; : 5.61, &quot;secondsfromstart&quot; : 19 } } ] }, &quot;user_type&quot; : 1, &quot;idunplug_base&quot; : 1, &quot;travel_time&quot; : 262, &quot;idunplug_station&quot; : 168, &quot;ageRange&quot; : 4, &quot;idplug_station&quot; : 120, &quot;unplug_hourTime&quot; : { &quot;$date&quot; : &quot;2018-09-01T01:00:00.000+0200&quot; }, &quot;zip_code&quot; : &quot;28015&quot; }&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The used code is:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;d100 =  pd.read_json(&#x27;test 1.json&#x27;, lines=True)d100[&quot;track&quot;][&quot;features&quot;][0][&quot;geometry&quot;][&quot;coordinates&quot;]&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A &lt;code&gt;KeyError&lt;/code&gt; is retrieved although it appears that Key seems to be correct:&lt;/p&gt;&lt;pre class=&quot;lang-none prettyprint-override&quot;&gt;&lt;code&gt;/home/cloudera/anaconda2/lib/python2.7/site-packages/pandas/core/indexes/base.pyc in get_value(self, series, key)2558         try:2559             return self._engine.get_value(s, k,-&amp;gt; 2560tz=getattr(series.dtype, &#x27;tz&#x27;, None))2561         except KeyError as e1:2562             if len(self) &amp;gt; 0 and self.inferred_type in [&#x27;integer&#x27;, &#x27;boolean&#x27;]:pandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_value()pandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_value()pandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()KeyError: &#x27;features&#x27;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Any help please on that?&lt;/p&gt;</Body>
<Tags>python,json,pandas,python-2.7,keyerror</Tags>
</question>
<answer>
<Body>&lt;p&gt;Your &lt;code&gt;d100[&quot;track&quot;]&lt;/code&gt; is a &lt;em&gt;full column&lt;/em&gt; of your &lt;code&gt;d100&lt;/code&gt;, i. e. a &lt;em&gt;series:&lt;/em&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;In[1]: d100[&quot;track&quot;]                                                                Out[1]:                                                                             0    {&#x27;type&#x27;: &#x27;FeatureCollection&#x27;, &#x27;features&#x27;: [{&#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;coord.....1    {&#x27;type&#x27;: &#x27;FeatureCollection&#x27;, &#x27;features&#x27;: [{&#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;coord.....2    {&#x27;type&#x27;: &#x27;FeatureCollection&#x27;, &#x27;features&#x27;: [{&#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;coord.....3    {&#x27;type&#x27;: &#x27;FeatureCollection&#x27;, &#x27;features&#x27;: [{&#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;coord.....Name: track, dtype: object      &lt;/code&gt;&lt;/pre&gt;&lt;p&gt;It has &lt;strong&gt;four&lt;/strong&gt; items (rows), but you &lt;em&gt;didn&#x27;t specify any of them&lt;/em&gt;.&lt;/p&gt;&lt;p&gt;So instead of&lt;/p&gt;&lt;pre&gt;&lt;code&gt;d100[&quot;track&quot;][&quot;features&quot;][0][&quot;geometry&quot;][&quot;coordinates&quot;]&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;use (for individual items in the &lt;code&gt;d100[&quot;track&quot;]&lt;/code&gt; series)&lt;/p&gt;&lt;pre&gt;&lt;code&gt;d100[&quot;track&quot;][0][&quot;features&quot;][0][&quot;geometry&quot;][&quot;coordinates&quot;] d100[&quot;track&quot;][1][&quot;features&quot;][0][&quot;geometry&quot;][&quot;coordinates&quot;] d100[&quot;track&quot;][2][&quot;features&quot;][0][&quot;geometry&quot;][&quot;coordinates&quot;] d100[&quot;track&quot;][3][&quot;features&quot;][0][&quot;geometry&quot;][&quot;coordinates&quot;] &lt;/code&gt;&lt;/pre&gt;&lt;p&gt;to obtain&lt;/p&gt;&lt;blockquote&gt;&lt;pre&gt;&lt;code&gt;[-3.7073786, 40.4237274997222][-3.7022000999999998, 40.4052982997222][-3.69610249972222, 40.427829][-3.72050759972222, 40.4277548]&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;</Body>
</answer>
</qroot>
